<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ESP32 Distance Monitor</title>

</head>
<body>
  <h1>ESP32 Distance Monitor</h1>
  <p class="distance-display">Distance: <span id="distanceValue">--</span> cm</p>
  <p class="status" id="status">Disconnected</p>

  <script>
    let ws;
    const distanceValue = document.getElementById('distanceValue');
    const statusText = document.getElementById('status');

    function connectWebSocket() {
      ws = new WebSocket('ws://your_esp32_ip_address:81'); // Replace with your ESP32's IP address

      ws.onopen = () => {
        console.log('Connected to WebSocket server');
        statusText.textContent = 'Connected';
        statusText.style.color = 'green';
      };

      ws.onmessage = (event) => {
        console.log('Received:', event.data);
        
        // Check if the message contains distance data
        if (event.data.startsWith('distance:')) {
          const distance = event.data.split(':')[1];
          distanceValue.textContent = distance;
        }
      };

      ws.onclose = () => {
        console.log('Disconnected from WebSocket server');
        statusText.textContent = 'Disconnected';
        statusText.style.color = 'red';
      };

      ws.onerror = (error) => {
        console.error('WebSocket Error:', error);
      };
    }

    // Automatically connect when the page loads
    window.onload = connectWebSocket;
  </script>
</body>
</html>
